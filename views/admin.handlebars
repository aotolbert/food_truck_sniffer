<div class="container">
  <div class="row">
    <div class="col-8 offset-2">
      <form id="newBiz">
        <div class="form-group">
          <label for="name">Bussiness Name:</label>
          <input type="name" class="form-control" id="name">
        </div>
        <div class="form-group">
          <label for="twitter">Twitter ID:</label>
          <input type="twitter" class="form-control" id="twitter">
        </div>
        <div class="form-group">
          <label for="url">Business URL:</label>
          <input type="url" class="form-control" id="url">
        </div>
        <div class="form-group">
          <label for="address">Current Location / Address:</label>
          <input type="address" class="form-control" id="address">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
    </div>
  </div>
</div>
	<script src="https://code.jquery.com/jquery.js"></script>

<script>

  var nameInput = $("#name");
  var twitterInput = $("#twitter");
  var urlInput = $("#url");
  var addressInput = $("#address");
  $('#newBiz').on("submit", handleFormSubmit)
  

  $(document).ready(function(){
    populateNames();
    
  });
  
    function populateNames() {
      console.log("this function is indeed, running...");
      $.ajax("/api/trucks/", {
        type: "GET",
      }).then(function (response) {
        for (let i = 0; i < response.length; i++) {
          let newOBJ = response[i];
          console.log("This is what we are dealing with ", newOBJ);

        }

      })

    };
    
    

  
  function handleFormSubmit(event) {

    event.preventDefault();
    console.log("submit clicked")
    // Wont submit the post if we are missing a body, title, or author
    if (!nameInput.val().trim() || !twitterInput.val().trim() || !urlInput.val().trim() ) {
      console.log('failed if statement')
      return;
    }
    // Constructing a newPost object to hand to the database
    var newBiz = {
        name: nameInput
        .val()
        .trim(),
        address: "Charlotte,nc",
        twitterId: twitterInput
        .val()
        .trim(),
        url: urlInput
        .val()
        .trim(),
    }
    
    submitPost(newBiz).then(function(){
    runApiArray(nameInput);
    })
    $('nameInput').val("")
    $('twitterInput').val("")
    $('urlInput').val("")
    $('address').val("")
  }
  // Submits a new post and brings user to blog page upon completion
  function submitPost(biz) {
    $.post("/api/trucks", biz)
  }
</script>